webpackJsonp([0],[,,function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}for(var a=n(15),u=n(18),o=n(5),l=(function(){function e(e,t){var n=[],r=!0,i=!1,s=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,s=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),c=(function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),f=function(e,t){return Math.floor(e+Math.random()*(t+1-e))},p=function(){return f(1,5)},d=function(){function e(t,n){s(this,e),this.moveDir=t,this.image=n}return c(e,[{key:"onStepOver",value:function(e){}},{key:"onStop",value:function(e){}}]),e}(),y=function(e){function t(e,n,i,a,u){s(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return o.setId=n,o.text=a,o.cost=u,o.houses=0,o.owner=null,o}return i(t,e),c(t,[{key:"onStop",value:function(e){switch(this.owner){case e:break;case null:this.owner=e,e.money-=this.cost,e.own.push(this);break;default:this.owner.money+=this.cost,e.money-=this.cost}}}]),t}(d),h=function(e){function t(e){return s(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"diamond.jpg"))}return i(t,e),t}(d),g=function(e){function t(e){return s(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"chance.png"))}return i(t,e),t}(d),w=function(e){function t(e){return s(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"salary.png"))}return i(t,e),c(t,[{key:"onStepOver",value:function(e){switch(e.level){case 1:e.money+=150;break;case 2:e.money+=200;break;case 3:e.money+=250;break;default:throw"Unknown player level "+e.level}Math.random()>.5&&e.level<3&&(e.level+=1,e.money-=50)}}]),t}(d),v=function e(t){s(this,e),this.i=8,this.j=8,this.money=372,this.level=1,this.id=t,this.own=[]},b=new d("right","parking.png"),m=new d("up","jail.png"),_=new d("down","police.svg"),k=new w("left"),P=new Array(9),j=0;j<9;j++)P[j]=new Array(9);P[8][8]=k,P[8][7]=new y("left",1,"buildings/DogHouse.png","Конура",5),P[8][6]=new h("left"),P[8][5]=new y("left",1,"buildings/TreeHouse.png","Дом на дереве",5),P[8][4]=new y("left",2,"buildings/Igloo.png","Иглу",15),P[8][3]=new g("left"),P[8][2]=new y("left",2,"buildings/Hut.png","Палатка",15),P[8][1]=new y("left",2,"buildings/Shed.png","Сарай",20),P[8][0]=m,P[7][0]=new y("up",3,"buildings/Museum.png","Музей",35),P[6][0]=new y("up",3,"buildings/LightHouse.png","Маяк",35),P[5][0]=new y("up",3,"buildings/School.png","Школа",40),P[4][0]=new y("up",4,"buildings/Shop.png","Магазин",55),P[3][0]=new h("up"),P[2][0]=new y("up",4,"buildings/CityHall.png","Ратуша",55),P[1][0]=new y("up",4,"buildings/PostOffice.png","Почта",60),P[0][0]=b,P[0][1]=new y("right",5,"buildings/Embassy.png","Посольство",80),P[0][2]=new g("right"),P[0][3]=new y("right",5,"buildings/Temple.png","Храм",80),P[0][4]=new y("right",5,"buildings/Church.png","Церковь",90),P[0][5]=new y("right",6,"buildings/Hospital.png","Больница",115),P[0][6]=new y("right",6,"buildings/OfficeBuilding.png","Офис",115),P[0][7]=new y("right",6,"buildings/Tower.png","Башня",120),P[0][8]=_,P[1][8]=new y("down",7,"buildings/Factory.png","Фабрика",145),P[2][8]=new y("down",7,"buildings/Pyramid.png","Пирамида",145),P[3][8]=new h("down"),P[4][8]=new y("down",7,"buildings/Castle.png","Замок",150),P[5][8]=new g("down"),P[6][8]=new y("down",8,"buildings/Stadium.png","Стадион",170),P[7][8]=new y("down",8,"buildings/Skyscraper.png","Небоскрёб",200),t.a={name:"Game",data:function(){return{dices:[6,6],cells:P,turn:0,players:[new v(1),new v(2),new v(3),new v(4)]}},components:{DeskCell:u.a,Dice:a.a,DeskPlayer:o.a},methods:{roll:function(){this.dices=[p(),p()],this.movePlayer()},movePlayer:function(){var e=this,t=this.dices.reduce(function(e,t){return e+t}),n=this.cells[this.currentPlayer.i][this.currentPlayer.j],r=setInterval(function(){switch(n.moveDir){case"up":e.currentPlayer.i-=1;break;case"down":e.currentPlayer.i+=1;break;case"right":e.currentPlayer.j+=1;break;case"left":e.currentPlayer.j-=1;break;default:throw"Unknown moveDir "+n.moveDir}if(n=e.cells[e.currentPlayer.i][e.currentPlayer.j],n.onStepOver(e.currentPlayer),(t-=1)<=0){clearInterval(r),n.onStop(e.currentPlayer);var i=l(e.dices,2);i[0]!==i[1]&&(e.turn+=1)}},10)}},computed:{currentPlayer:function(){return this.players[this.turn%this.players.length]}}}},function(e,t,n){"use strict";t.a={name:"Dice",props:["value"],computed:{diceClass:function(){return"dice-"+this.value}}}},function(e,t,n){"use strict";var r=n(5);t.a={name:"Cell",props:["i","j","players","image","text","setId","cost"],components:{Player:r.a},computed:{playersIds:function(){var e=this,t=[];return this.players.forEach(function(n){e.i==n.i&&e.j==n.j&&t.push(n.id)}),t},backgroundStyle:function(){return"background-image: url("+this.image+")"},buildingCell:function(){return this.setId}}}},function(e,t,n){"use strict";function r(e){n(20)}var i=n(6),s=n(21),a=n(0),u=r,o=a(i.a,s.a,!1,u,null,null);t.a=o.exports},function(e,t,n){"use strict";t.a={name:"Player",props:["id"]}},function(e,t,n){e.exports=n(8)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),i=n(13);new r.a({el:"#app",render:function(){return(0,arguments[0])(i.a,null,[])}})},,,,,function(e,t,n){"use strict";function r(e){n(14)}var i=n(2),s=n(23),a=n(0),u=r,o=a(i.a,s.a,!1,u,null,null);t.a=o.exports},function(e,t){},function(e,t,n){"use strict";function r(e){n(16)}var i=n(3),s=n(17),a=n(0),u=r,o=a(i.a,s.a,!1,u,null,null);t.a=o.exports},function(e,t){},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("span",{staticClass:"dice",class:e.diceClass})},i=[],s={render:r,staticRenderFns:i};t.a=s},function(e,t,n){"use strict";function r(e){n(19)}var i=n(4),s=n(22),a=n(0),u=r,o=a(i.a,s.a,!1,u,null,null);t.a=o.exports},function(e,t){},function(e,t){},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("span",{staticClass:"player",class:"id"+e.id})},i=[],s={render:r,staticRenderFns:i};t.a=s},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.buildingCell?n("td",[n("div",{staticClass:"building-card"},[n("div",{staticClass:"header",class:"-set"+e.setId}),n("div",{staticClass:"body"},[n("div",{staticClass:"title"},[e._v(e._s(e.text))]),n("div",{staticClass:"image"},[n("img",{attrs:{src:e.image}})]),n("div",{staticClass:"price"},[e._v(e._s(e.cost)+"K$")])])]),e._l(e.playersIds,function(e){return n("Player",{key:e,attrs:{id:e}})})],2):n("td",{staticClass:"corner image",style:e.backgroundStyle},e._l(e.playersIds,function(e){return n("Player",{key:e,attrs:{id:e}})}))},i=[],s={render:r,staticRenderFns:i};t.a=s},function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("table",{staticClass:"desk"},e._l(e.cells,function(t,r){return n("tr",[e._l(t,function(t,i){return[t?n("DeskCell",{staticClass:"cell",attrs:{cost:t.cost,i:r,image:t.image,j:i,players:e.players,"set-id":t.setId,text:t.text}}):1==r&&1==i?n("td",{attrs:{colspan:"7",rowspan:"7"}},[n("table",[n("tr",e._l(e.players,function(t){return n("td",{key:t.id},[n("span",{directives:[{name:"show",rawName:"v-show",value:t==e.currentPlayer,expression:"player == currentPlayer"}]},[e._v("↓")])])})),n("tr",e._l(e.players,function(e){return n("td",{key:e.id},[n("DeskPlayer",{attrs:{id:e.id}})],1)})),n("tr",e._l(e.players,function(t){return n("td",{key:t.id},e._l(2*t.level-1,function(t){return n("span",[e._v("★")])}))})),n("tr",e._l(e.players,function(t){return n("td",{key:t.id},[e._v(e._s(t.money)+"K$")])})),e._l([1,2,3,4,5,6,7,8],function(t){return n("tr",e._l(e.players,function(r){return n("td",{key:r.id},e._l(r.own.filter(function(e){return e.setId==t}),function(t){return n("div",[e._v(e._s(t.text))])}))}))})],2)]):e._e()]})],2)})),n("h1",[e._l(e.dices,function(e,t){return n("Dice",{key:t,attrs:{value:e}})}),e._v(" "),n("button",{on:{click:e.roll}},[e._v("Role")])],2)])},i=[],s={render:r,staticRenderFns:i};t.a=s}],[7]);
//# sourceMappingURL=client.436c7684.js.map